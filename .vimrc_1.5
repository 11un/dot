" Buffer Shortcuts ------------------------------------------------- {{{

    " List buffers, prep prompt for selection
    nnoremap <Leader>bl :ls<CR>:b<Space>
    " Next buffer
    nnoremap <Leader>bn :bn<CR>
    " Previous buffer
    nnoremap <Leader>bp :bp<CR>

" }}}
" Copy + Paste ----------------------------------------------------- {{{

    " Copy selected test to system clipboard
    vnoremap <Leader>y "+y:echom "Copied to Clipboard"<CR>
    " Paste system clipboard to Vim
    nnoremap <Leader>p :set paste<CR>"+p:set nopaste<CR>
          \:echom "Pasted from Clipboard"<CR>

" }}}
" Core Keymaps, Movements, Settings -------------------------------- {{{

    " <jk> to exit insert
    inoremap jk <Esc>
    " <Esc> to end of line insert
    inoremap <Esc> <C-o>A

    " Reverse exclusive linewise behaviour when wrap is on
    noremap j gj
    noremap k gk
    noremap gj j
    noremap gk k

    " New line below, stay in normal
    nnoremap <Leader>o o<Esc>k
    " New line above, stay in normal
    nnoremap <Leader>O O<Esc>j
    " New line below and above, stay in normal
    nnoremap <Leader>= o<Esc>kO<Esc>j

    " _ Move the current line down
    nnoremap <Leader>_ ddp
    " - Move the current line up
    nnoremap <Leader>- dd<esc>kkp<esc>

" }}}
" Echo ------------------------------------------------------------- {{{

    " Test Echom
    echom "Using echom: >^.^<"

" }}}
" Folding, Settings, Shortcuts ------------------------------------- {{{

    " Persist Folds Fixed - (mkview, loadview do not remember syntax)
    augroup SaveFoldState
        autocmd!
        autocmd BufWinLeave ?* mkview | filetype detect
        autocmd BufWinEnter ?* silent! loadview | filetype detect
    augroup END

    " Toggle folds with spacebar
    nnoremap <Leader><Space> za
    vnoremap <Leader><Space> za

    " Show folded lines, first-line text, total lines folded
    function! ShowFoldMessage()
      let get_total_lines = v:foldend - v:foldstart + 1
      let get_text = substitute(getline(v:foldstart), "{{*", "", 1)
      let show_message = get_text . get_total_lines . ' Lines '
      return show_message
    endfunction
    set foldtext=ShowFoldMessage()

" }}}
" Indentation Settings --------------------------------------------- {{{

    filetype plugin indent on
    set softtabstop=2
    set shiftwidth=2
    set expandtab
    set tabstop=2

" }}}
" Leaders, Mappings, Settings -------------------------------------- {{{

    let mapleader = ","
    let maplocalleader = "\\"

" }}}
" Line Numbers Settings -------------------------------------------- {{{

    " Hybrid numbers
    set number
    set relativenumber
    set numberwidth=1

" }}}
" NETRW File Browser ----------------------------------------------- {{{

    let g:netrw_banner = 0
    let g:netrw_liststyle = 3
    let g:netrw_browse_split = 4
    let g:netrw_altv = 1
    let g:netrw_winsize = 33

    " Browse Files - <bf>
    nnoremap <silent><Leader>bf :Vexplore<CR>

" }}}
" OMNI Tab Completion ---------------------------------------------- {{{

    " Omnicompletion :h cmdline-completion
    set nocompatible

" }}}
" Source, Reload Files -------------------------------------------- {{{

    " Source .vimrc
    nnoremap <Leader>sv :so ~/Projects/learn-vimscript-the-hardway/.vimrcc<CR>

" }}}
" Syntax, Colors --------------------------------------------------- {{{

    syntax on
    colorscheme molokay

" }}}
" Uppercase Words -------------------------------------------------- {{{

    " Uppcase word while in insert mode and continue at same position
    inoremap <C-u> <Esc>viw~ea
    " Mark position, uppercase word, return to position in normal mode
    nnoremap <C-u> m`viw~<C-o>

" }}}
" Whitespace Awareness --------------------------------------------- {{{

    " Show whitespace
    highlight ExtraWhitespace ctermbg=red
    match ExtraWhitespace /\s+$/
    autocmd BufWinEnter * match ExtraWhitespace /\s\+$/
    autocmd InsertEnter * match ExtraWhitespace /\s\+\%#\@<!$/
    autocmd InsertLeave * match ExtraWhitespace /\s\+$/
    autocmd BufWinLeave * call clearmatches()

" }}}
" Quick Edit Files ------------------------------------------------- {{{

    " .vimrc
    nnoremap <silent> <Leader>ev :sp $MYVIMRC<CR>
    " notes
    nnoremap <silent> <Leader>en :sp
          \ ~/notes/88c8f4f99bb6bbd510ef1461ec06044f/notes.md<CR>
    " tmux
    nnoremap <silent> <Leader>et :tabnew<CR>:e ~/.tmux.conf<CR>
    " .bash aliases
    nnoremap <silent> <Leader>eba :tabnew<CR>:e ~/.bash_aliases<CR>
    " .bashrc
    nnoremap <silent> <Leader>ebc :tabnew<CR>:e ~/.bashrc<CR>
    " snippets
    nnoremap <silent> <Leader>es :UltiSnipsEdit<CR>

" }}}
