#!/usr/bin/env bash

## Name: copy-idea-project
## Created: 2020.08.05.11:32
## Description: Quick copy IntelliJ Idea project located in default
##              IdeaProjects directory project to working directory.

copy_idea_project() {

  local grn='\033[0;32m'
  local yel='\033[0;33m'
  local red='\033[0;31m'
  local def='\033[0m'

  # Print info.
  printf "\n%s${yel}%s${def}\n%s${yel}%s${def}\n%s\n\n${red}%s${def}\n" \
         "The script copies a project from " "~/IdeaProjects/<project-name>" \
         "or package from " "~/IdeaProjects/src/<package-name> " \
         "to the user's current working directory." \
         "Be careful not overwrite something!"

  # Prompt for project name.
  printf "\n%s${yel}%s${def}" "Enter " "<project-name>: "
  # Read/Assign project name.
  read -r projectName

  # Declare/Assign dir to project directory.
  local projectDir="$HOME/IdeaProjects/${projectName}/"

  if [ -d "${projectDir}" ]; then

    # Prompt/Assign if want to copy full project.
    read -r -p "Copy full project to current directory? [y/N] " response

    # If response is true...
    case "$response" in
        # Handle yes/YES/y/Y/yEs etc.
        [yY][eE][sS]|[yY])

            # If the directory exists...
            if [ -d "${projectDir}" ]; then

              # Copy the directory recurisively to current working directory.
              cp -r "$projectDir" .
              # Print confirmation.
              printf "\n%s${grn}${projectName}${def}%s\n" "Package " " added."

            else

              # Print failed message.
              printf "\n${red}%s${def}\n" "Failed to add project."

            fi
            ;;
        *)
            # Prompt for package name.
            printf "%s${yel}%s${def}" "Enter " "<package-name>: "
            # Read/Assign project name.
            read -r packageName

            # Declare/Assign dir to package directory.
            local packageDir="$HOME/IdeaProjects/${projectName}/src/${packageName}/"


            # If the directory exists...
            if [ -d "${packageDir}" ]; then

              # Copy the directory recurisively to current working directory.
              cp -r "$packageDir" .
              # Print confirmation.
              printf "\n%s${grn}${packageName}${def}%s\n" "Package " " added."

            else
              # Print failed message.
              printf "\n${red}%s${def}\n" "Failed to add package."

            fi
            ;;
    esac
  else

    # Print failed message.
    printf "\n${red}%s${def}\n" "The project you entered does not exist."

  fi
  echo
}

copy_idea_project
